{% macro product_cards(products) -%}
<div class="sumo-card-grid is-product-wrap">
  <div class="scroll-wrap">
    {% for product in products %}
      <div class="card card--product zoom-on-hover">
          <img class="card--icon" src="{{ product.image_url }}" alt="{{ pgettext('DB: products.Product.title', product.title) }}" />
          <div class="card--details">
            <h3 class="card--title">
              <a class="expand-this-link" href="{{ url('products.product', slug=product.slug) }}"
                 data-event-name="link_click"
                 data-event-parameters='{
                   "link_name": "product-home",
                   "link_detail": "{{ product.slug }}"
                 }'>
                {{ pgettext('DB: products.Product.title', product.title) }}
              </a>
            </h3>
            <p class="card--desc">{{ pgettext('DB: products.Product.description', product.description) }}</p>
          </div>
      </div>
    {% endfor %}
  </div>
</div>
{%- endmacro %}

{% macro product_sidebar(products, selected_product=None) -%}
<h3 class="sidebar-subheading large-only">{{ _('All Products') }}</h3>
<nav class="sidebar-nav topics">
  <span class="details-heading"></span>
  <ul class="sidebar-nav--list">
    {% for product in products %}
      {% set product_topics_url = url('products.topics', product_slug=product.slug) %}
      <li class="sidebar-nav--item %}">
        <a class="sidebar-nav--link {% if selected_product == product %}selected{% endif %}"
          href="{{ product_topics_url }}"
          data-event-name="link_click"
          data-event-parameters='{
            "link_name": "sidebar.product-and-topic-home",
{# TODO: FIx this               #}
            {# "link_detail": "{{ product.slug + '/' + topic.slug }}" #}
          }'>
          {{ pgettext('DB: products.Product.title', product.title) }}
        </a>
      </li>
    {% endfor %}
  </ul>
</nav>
{%- endmacro %}